<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Lyrinė Vertėjas</title>
  <style>
  body {
    display: flex;
    flex-direction: column;
    flex: 1 0 300px;
    padding: 0; margin: 0;
    height: 100%;

    text-align: center;
  }
  body, button {
    font-family: "HP Simplified", "Helvetica Neue", Helvetica, Arial, sans-serif;
  }
  header {
    background-color: #0096D6;
  }
  h1, button {
    color: white;
    background-color: #0096D6;
    text-shadow: 3px 3px rgba(0,0,0,0.2);
  }
  h1 {
    line-height: 30vh;
    font-size: 8vw;
  }
  main {
    display: flex;
    justify-content: space-around;
    align-items: center;
  }
  button {
    border: none;
    -webkit-appearance: none;
    font-size: 4vw;
    width: 30vw;
  }
  button span {
    display: inline-block;
    -webkit-animation: wait infinite 1s steps(8, end);
    animation: wait infinite 2s steps(8, end);
  }
  @-webkit-keyframes wait {
    100% {-webkit-transform: rotate(360deg);}
  }
  @keyframes wait {
    100% {transform: rotate(360deg);}
  }
  </style>
</head>
<body>
<header>
  <h1>Lyrinė Vertėjas</h1>
</header>
<main>
  <section class="language">
    <label>Language:
      <select name="language" id="language">
        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="de-DE">German</option>
        <option value="es-ES">Español</option>
        <option value="fr-FR">Français</option>
        <option value="it-IT">Italiano</option>
      </select>
    </label>
  </section>
  <section class="button">
    <p><button id="doThis">Do it!</button></p>
  </section>
  <section class="file">
    <label>To Language:
      <select name="tolanguage" id="tolanguage">
        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="de-DE">German</option>
        <option value="es-ES">Español</option>
        <option value="fr-FR">Français</option>
        <option value="it-IT">Italiano</option>
      </select>
    </label>
  </section>
</main>
<article>
  <div id="response"></div>
  <div id="translation"></div>
</article>
<script src="jquery.js"></script>
<script>

    var data = {
      'url': 'http://estelle.github.io/audiotranslator/data/rudolph.wav',
      'apikey': '7ed75927-9aa2-4a5f-a578-1c753fdc0b60',
      'request_url' : 'https://api.idolondemand.com/1/api/sync/recognizespeech/v1',
      'button' : $('#doThis').text()
    };

  $('#doThis').on('click', function(){
      app.submitToHP();
      app.changeButton();
    });

  var app = {

      submitToHP : function () {

        var query = data.request_url + '?';
            query  += "&url=" + encodeURIComponent(data.url);
            query  += "&apikey=" + data.apikey;
            query += "&language=" + ($('#lang').value || "en-US");

        var request = $.ajax(query, function(e) {
                // successfully sent

              })
            .done(function(e) {
                // response received
                app.acceptResponse(e);

              })
            .fail(function(e) {
                // error
                console.dir(e);
              })
            .always(function(e) {
                // finished
                app.revertButton();
            });
      },

      acceptResponse : function (data) {
          var response;
          // get response
          response = data.document[0].content;
          // massage data

          // display response
          app.displayResults(response);
          app.translate(response);

      },

      displayResults: function (result) {
          var container = document.getElementById('response');
          container.innerHTML = result;
      },

      changeButton: function () {
          var button = document.getElementById('doThis');
          button.innerHTML = '<span>|</span>';
      },

      revertButton: function () {
          var button = document.getElementById('doThis');
          button.innerHTML = data.button;
      },

      translate: function(text) {
          var translation = "https://translate.googleapis.com/translate_a/single?client=gtx&sl=" + $('#language').val()+ "&tl=" + $('#tolanguage').val() + "&dt=t&q=" + encodeURIComponent(text);
          var lang = $.get
      }

  }
  </script>
</body>
</html>